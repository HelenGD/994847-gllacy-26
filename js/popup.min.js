function getItem(e){try{return localStorage.getItem(e)}catch(e){console.error(e)}}function setItem(e,o){try{localStorage.setItem(e,o)}catch(e){console.error(e)}}var button=document.querySelector(".btn-feedback"),popup=document.querySelector(".modal"),close=popup.querySelector(".popup-close"),form=popup.querySelector(".form-feedback"),message=popup.querySelector("#feedback-message"),userName=popup.querySelector("#user-name"),email=popup.querySelector("#user-email"),storageName=getItem("name"),storageEmail=getItem("email"),handleClose=function(e){e.path.includes(form)||(popup.classList.remove("modal-show"),popup.classList.remove("modal-error"),document.body.classList.remove("modal-overlay"),window.removeEventListener("click",handleClose))};button.addEventListener("click",function(e){storageName&&!storageEmail?(userName.value=storageName,email.focus()):storageName&&storageEmail?(userName.value=storageName,email.value=storageEmail,message.focus()):userName.focus(),e.preventDefault(),e.stopPropagation(),popup.classList.add("modal-show","modal-show-animated"),popup.addEventListener("animationend",function(){popup.classList.remove("modal-show-animated")},{once:!0}),userName.focus(),document.body.classList.add("modal-overlay"),window.addEventListener("click",handleClose)}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-show"),popup.classList.remove("modal-error"),document.body.classList.remove("modal-overlay"),window.removeEventListener("click",handleClose)}),form.addEventListener("submit",function(e){userName.value&&email.value&&message.value?userName.value&&email.value&&message.value&&(setItem("name",userName.value),setItem("email",email.value),close.click()):(e.preventDefault(),popup.addEventListener("animationend",function(){popup.classList.remove("modal-error")},{once:!0}),popup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("modal-show")&&(e.preventDefault(),popup.classList.remove("modal-show"),popup.classList.remove("modal-error"),document.body.classList.remove("modal-overlay"))});
